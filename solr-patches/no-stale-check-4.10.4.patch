commit 13449f7dc2ac0d205180611f2de6e1371cd88a4b
Author: Zeeshan Lakhani <zeeshan.lakhani@gmail.com>
Date:   Thu May 7 00:20:08 2015 +0900

    Update patches for Solr 4.10.4

diff --git a/solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java.orig b/solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java
index 36a1144..c653fc3 100644
--- a/solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java.orig
+++ b/solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java
@@ -31,6 +31,7 @@ import java.util.concurrent.SynchronousQueue;
 import java.util.concurrent.TimeUnit;

 import org.apache.commons.lang.StringUtils;
+import org.apache.http.params.HttpConnectionParams;
 import org.apache.http.client.HttpClient;
 import org.apache.http.impl.client.CloseableHttpClient;
 import org.apache.http.impl.client.DefaultHttpClient;
@@ -216,6 +217,8 @@ public class HttpShardHandlerFactory extends ShardHandlerFactory implements org.
     this.idleConnectionsEvictor = new UpdateShardHandler.IdleConnectionsEvictor(clientConnectionManager,
         connectionsEvictorSleepDelay, TimeUnit.MILLISECONDS, maxConnectionIdleTime, TimeUnit.MILLISECONDS);
     idleConnectionsEvictor.start();
+    this.defaultClient.getParams().setParameter(HttpConnectionParams.STALE_CONNECTION_CHECK, false);
+    this.defaultClient.getParams().setParameter(HttpConnectionParams.TCP_NODELAY, true);

     // must come after createClient
     if (useRetries)
